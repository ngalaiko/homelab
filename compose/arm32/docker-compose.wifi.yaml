version: '3.4'

services:
    wifi-ap-supervisor:
        image: arm32v6/docker
        command: docker run --name=wifi-ap --rm -i -e AP_SSID=${WIFI_SSID} -e AP_PASSPHRASE=${WIFI_PASSWORD} --privileged --net host ngalayko/docker-ap:arm32v7
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock
        deploy:
            replicas: 1
            restart_policy:
                condition: on-failure
            placement:
                constraints:
                    - "node.labels.wifi==true"
